<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>STEAL A BRAINROT</title>
<link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;900&family=Barlow:wght@300;400&display=swap" rel="stylesheet"/>
<style>
:root {
  --bg:    #080808;
  --bg2:   #0f0f0f;
  --bg3:   #161616;
  --line:  #1f1f1f;
  --acid:  #c6ff00;
  --red:   #ff3c00;
  --blue:  #00b4ff;
  --white: #f2f2f2;
  --dim:   #888;
  --gold:  #e8c97a;
  --fd:    'Barlow Condensed', sans-serif;
  --fb:    'Barlow', sans-serif;
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body { background: var(--bg); color: var(--white); font-family: var(--fb); font-weight: 300; overflow-x: hidden; cursor: none; }

/* ── CURSOR ── */
#cur  { position:fixed; width:8px; height:8px; border-radius:50%; background:var(--acid); pointer-events:none; z-index:99999; transform:translate(-50%,-50%); mix-blend-mode:exclusion; }
#ring { position:fixed; width:32px; height:32px; border-radius:50%; border:1px solid rgba(198,255,0,.3); pointer-events:none; z-index:99998; transform:translate(-50%,-50%); }

/* ── GRAIN ── */
.grain { position:fixed; inset:0; pointer-events:none; z-index:9997; opacity:.025;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size:150px; animation:gr 1s steps(2) infinite; }
@keyframes gr { 50% { background-position: 33px 21px; } }



/* ── NAV ── */
nav { height:60px; display:flex; align-items:center; justify-content:space-between; padding:0 2.5rem; border-bottom:1px solid var(--line); position:sticky; top:0; background:rgba(8,8,8,.97); backdrop-filter:blur(16px); z-index:500; }
.logo { font-family:var(--fd); font-weight:900; font-size:1.2rem; letter-spacing:.1em; text-transform:uppercase; text-decoration:none; color:var(--white); display:flex; align-items:center; gap:.5rem; }
.logo-sq { width:24px; height:24px; border:1.5px solid var(--acid); display:flex; align-items:center; justify-content:center; flex-shrink:0; transition: border-color .3s; }
.logo-sq.blue { border-color: var(--blue); }
.logo-sq.blue svg rect { fill: var(--blue); }

.tabs { display:flex; gap:0; }
.tab { font-family:var(--fd); font-weight:700; font-size:.72rem; letter-spacing:.18em; text-transform:uppercase; background:none; border:none; color:var(--dim); padding:.5rem 1.4rem; cursor:none; position:relative; transition:color .2s; }
.tab::after { content:''; position:absolute; bottom:-1px; left:0; right:0; height:2px; background:var(--acid); transform:scaleX(0); transition:transform .25s; }
.tab.active { color:var(--white); }
.tab.active::after { transform:scaleX(1); }
.tab.tsunami-tab.active::after { background:var(--blue); }

.cart-btn { display:flex; align-items:center; gap:.5rem; background:none; border:1px solid var(--line); color:var(--white); padding:.38rem .9rem; font-family:var(--fd); font-weight:700; font-size:.7rem; letter-spacing:.14em; text-transform:uppercase; cursor:none; transition:all .2s; }
.cart-btn:hover { border-color:var(--acid); color:var(--acid); }
.cart-btn.blue-hover:hover { border-color:var(--blue); color:var(--blue); }
.cbadge { background:var(--red); color:#fff; font-size:.58rem; font-weight:700; width:15px; height:15px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; font-family:var(--fd); }

/* ── STORE PANELS ── */
.store { display:none; }
.store.active { display:block; }

/* ── HERO MINIMAL ── */
.hero { padding:4rem 2.5rem 3rem; border-bottom:1px solid var(--line); position:relative; overflow:hidden; }
.hero-grid { position:absolute; inset:0; pointer-events:none; opacity:.25;
  background-image: repeating-linear-gradient(90deg,var(--line) 0,var(--line) 1px,transparent 1px,transparent 70px), repeating-linear-gradient(180deg,var(--line) 0,var(--line) 1px,transparent 1px,transparent 70px); }
.scanline { position:absolute; top:0; left:0; right:0; height:1.5px; background:linear-gradient(90deg,transparent,var(--acid),transparent); animation:scan 4s ease-in-out infinite; pointer-events:none; }
.scanline.blue { background:linear-gradient(90deg,transparent,var(--blue),transparent); }
@keyframes scan { 0%{top:0;opacity:0} 10%{opacity:1} 90%{opacity:.4} 100%{top:100%;opacity:0} }
.hero-inner { position:relative; z-index:1; max-width:700px; }
.hero-label { font-family:var(--fd); font-weight:700; font-size:.65rem; letter-spacing:.3em; text-transform:uppercase; color:var(--acid); margin-bottom:1.2rem; display:flex; align-items:center; gap:.6rem; animation:fu .5s ease both; }
.hero-label.blue { color:var(--blue); }
.hero-label-line { width:20px; height:1px; background:currentColor; }
h1 { font-family:var(--fd); font-weight:900; font-size:clamp(3.8rem,8vw,7.5rem); line-height:.88; letter-spacing:-.01em; text-transform:uppercase; animation:fu .5s .06s ease both; }
h1 .outline { -webkit-text-stroke:1.5px var(--white); color:transparent; }
h1 .ac  { color:var(--acid); }
h1 .acb { color:var(--blue); }
.hero-sub { margin-top:1.4rem; font-size:.85rem; line-height:1.75; color:var(--dim); max-width:420px; animation:fu .5s .12s ease both; }
.hero-cta { display:flex; gap:.75rem; margin-top:2rem; animation:fu .5s .18s ease both; }
.btn-fill { display:inline-flex; align-items:center; gap:.6rem; padding:.65rem 1.7rem; font-family:var(--fd); font-weight:700; font-size:.8rem; letter-spacing:.14em; text-transform:uppercase; border:none; cursor:none; text-decoration:none; transition:transform .15s, box-shadow .15s; }
.btn-fill.acid { background:var(--acid); color:#000; }
.btn-fill.acid:hover { transform:translateY(-2px); box-shadow:0 6px 24px rgba(198,255,0,.28); }
.btn-fill.blue { background:var(--blue); color:#000; }
.btn-fill.blue:hover { transform:translateY(-2px); box-shadow:0 6px 24px rgba(0,180,255,.28); }
@keyframes fu { from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:translateY(0)} }

/* ── SHOP AREA ── */
.shop { padding:3rem 2.5rem; }
.shop-row { display:flex; align-items:baseline; justify-content:space-between; margin-bottom:2rem; padding-bottom:1.2rem; border-bottom:1px solid var(--line); }
.shop-title { font-family:var(--fd); font-weight:900; font-size:2.2rem; letter-spacing:.03em; text-transform:uppercase; }
.shop-count { font-family:var(--fd); font-weight:700; font-size:.65rem; letter-spacing:.2em; color:var(--dim); text-transform:uppercase; }

/* ── GRID ── */
.grid { display:grid; grid-template-columns:repeat(3,1fr); gap:1px; background:var(--line); border:1px solid var(--line); }

/* ── CARD ── */
.card { background:var(--bg); padding:1.6rem; display:flex; flex-direction:column; gap:.6rem; animation:fu .45s ease both; transition:background .2s; position:relative; overflow:hidden; }
.card::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:var(--acid); transform:scaleX(0); transform-origin:left; transition:transform .3s; }
.card.blue-card::before { background:var(--blue); }
.card:hover { background:var(--bg2); }
.card:hover::before { transform:scaleX(1); }
.card-id { font-family:var(--fd); font-weight:900; font-size:2.8rem; line-height:1; color:rgba(255,255,255,.05); position:absolute; top:.8rem; right:1rem; pointer-events:none; letter-spacing:-.04em; }
.card-name { font-family:var(--fd); font-weight:900; font-size:1.35rem; letter-spacing:.02em; text-transform:uppercase; line-height:.95; }
.card-desc { font-size:.78rem; line-height:1.65; color:var(--dim); font-weight:300; flex:1; }
.card-footer { display:flex; align-items:center; justify-content:space-between; margin-top:.8rem; padding-top:.8rem; border-top:1px solid var(--line); }
.card-price { font-family:var(--fd); font-weight:900; font-size:1.7rem; color:var(--gold); line-height:1; }
.card-price sup { font-size:.75rem; font-weight:300; vertical-align:super; }
.buy-btn { display:inline-flex; align-items:center; gap:.45rem; background:none; border:1px solid var(--line); color:var(--white); padding:.45rem 1rem; font-family:var(--fd); font-weight:700; font-size:.68rem; letter-spacing:.14em; text-transform:uppercase; cursor:none; transition:all .2s; }
.buy-btn.acid-hover:hover { background:var(--acid); color:#000; border-color:var(--acid); }
.buy-btn.blue-hover:hover { background:var(--blue); color:#000; border-color:var(--blue); }

.empty-grid { padding:4rem; text-align:center; color:var(--dim); font-family:var(--fd); font-weight:700; font-size:1.5rem; letter-spacing:.05em; text-transform:uppercase; }

/* ── TOAST ── */
#toast { position:fixed; bottom:1.8rem; left:50%; transform:translateX(-50%) translateY(60px); background:var(--bg2); border:1px solid var(--line); border-left:2px solid var(--acid); color:var(--white); padding:.65rem 1.5rem; font-family:var(--fd); font-weight:700; font-size:.75rem; letter-spacing:.12em; text-transform:uppercase; z-index:9998; pointer-events:none; transition:transform .3s,opacity .3s; opacity:0; white-space:nowrap; }
#toast.show { transform:translateX(-50%) translateY(0); opacity:1; }

/* ── CART DRAWER ── */
.ov { position:fixed; inset:0; background:rgba(0,0,0,.65); z-index:600; opacity:0; pointer-events:none; transition:opacity .3s; backdrop-filter:blur(3px); }
.ov.open { opacity:1; pointer-events:auto; }
.drawer { position:fixed; top:0; right:0; bottom:0; width:380px; background:var(--bg2); border-left:1px solid var(--line); z-index:601; transform:translateX(100%); transition:transform .32s cubic-bezier(.4,0,.2,1); display:flex; flex-direction:column; }
.drawer.open { transform:translateX(0); }
.dh { display:flex; align-items:center; justify-content:space-between; padding:1.3rem 1.8rem; border-bottom:1px solid var(--line); }
.dt { font-family:var(--fd); font-weight:900; font-size:1.6rem; letter-spacing:.05em; text-transform:uppercase; }
.dc { background:none; border:1px solid var(--line); color:var(--dim); width:32px; height:32px; display:flex; align-items:center; justify-content:center; cursor:none; transition:all .2s; }
.dc:hover { border-color:var(--white); color:var(--white); }
.db { flex:1; overflow-y:auto; padding:1.3rem 1.8rem; }
.dempty { text-align:center; padding:3rem 0; font-family:var(--fd); font-weight:700; font-size:.75rem; letter-spacing:.2em; color:var(--dim); text-transform:uppercase; }
.ci { display:flex; align-items:flex-start; gap:.8rem; padding:1rem 0; border-bottom:1px solid var(--line); }
.ci-info { flex:1; }
.ci-store { font-family:var(--fd); font-weight:700; font-size:.58rem; letter-spacing:.2em; text-transform:uppercase; margin-bottom:.15rem; }
.ci-store.acid { color:var(--acid); }
.ci-store.blue { color:var(--blue); }
.ci-name { font-family:var(--fd); font-weight:900; font-size:1rem; letter-spacing:.02em; text-transform:uppercase; margin-bottom:.2rem; }
.ci-price { font-family:var(--fd); font-weight:700; font-size:.9rem; color:var(--gold); }
.ci-rm { background:none; border:none; color:var(--dim); cursor:none; padding:.2rem; transition:color .2s; }
.ci-rm:hover { color:var(--red); }
.df { padding:1.3rem 1.8rem; border-top:1px solid var(--line); }
.tr { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
.tl { font-family:var(--fd); font-weight:700; font-size:.65rem; letter-spacing:.2em; text-transform:uppercase; color:var(--dim); }
.tp { font-family:var(--fd); font-weight:900; font-size:1.8rem; color:var(--gold); }
.chk { width:100%; background:var(--acid); color:#000; border:none; padding:.9rem; font-family:var(--fd); font-weight:900; font-size:.9rem; letter-spacing:.18em; text-transform:uppercase; cursor:none; transition:background .2s; display:flex; align-items:center; justify-content:center; gap:.65rem; }
.chk:hover { background:#d4ff00; }

/* ── FOOTER ── */
footer { border-top:1px solid var(--line); padding:2rem 2.5rem; display:flex; align-items:center; justify-content:space-between; }
.fl { font-family:var(--fd); font-weight:900; font-size:.9rem; letter-spacing:.12em; display:flex; align-items:center; gap:.45rem; }
.fl span { color:var(--acid); }
.fc { font-family:var(--fd); font-size:.6rem; letter-spacing:.12em; color:var(--dim); text-transform:uppercase; }

/* ── RESPONSIVE ── */
@media(max-width:960px)  { .grid { grid-template-columns:repeat(2,1fr); } }
@media(max-width:640px)  { .grid { grid-template-columns:1fr; } .hero { padding:2.5rem 1.5rem 2rem; } .shop { padding:2rem 1.5rem; } nav { padding:0 1.5rem; } .tabs span { display:none; } .drawer { width:100%; } footer { padding:1.5rem; flex-direction:column; gap:.5rem; } }
</style>
</head>
<body>
<div class="grain"></div>
<div id="cur"></div>
<div id="ring"></div>

<!-- SVG SYMBOLS -->
<svg style="display:none">
  <defs>
    <symbol id="i-bag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/>
    </symbol>
    <symbol id="i-x" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
      <path d="M18 6 6 18M6 6l12 12"/>
    </symbol>
    <symbol id="i-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
      <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/>
      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
    </symbol>
    <symbol id="i-card" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
      <rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/>
    </symbol>
    <!-- logo mark -->
    <symbol id="i-mark" viewBox="0 0 14 14">
      <rect x="1" y="1" width="5" height="5" fill="currentColor"/>
      <rect x="8" y="8" width="5" height="5" fill="currentColor"/>
      <rect x="8" y="1" width="5" height="5" fill="none" stroke="currentColor" stroke-width="1"/>
      <rect x="1" y="8" width="5" height="5" fill="none" stroke="currentColor" stroke-width="1"/>
    </symbol>
  </defs>
</svg>



<!-- NAV -->
<nav>
  <a class="logo" href="#" id="nav-logo">
    <div class="logo-sq" id="logo-sq">
      <svg width="13" height="13" style="color:var(--acid)"><use href="#i-mark"/></svg>
    </div>
    <span id="logo-text">STEAL A BRAINROT</span>
  </a>

  <div class="tabs">
    <button class="tab active" id="tab-steal" onclick="switchStore('steal')">
      Steal a Brainrot
    </button>
    <button class="tab tsunami-tab" id="tab-tsunami" onclick="switchStore('tsunami')">
      Tsunami Brainrot
    </button>
  </div>

  <button class="cart-btn" id="cart-btn" onclick="toggleCart()">
    <svg width="15" height="15"><use href="#i-bag"/></svg>
    Panier <span class="cbadge" id="cart-count">0</span>
  </button>
</nav>

<!-- ══ STORE : STEAL ══ -->
<div class="store active" id="store-steal">

  <!-- HERO -->
  <section class="hero">
    <div class="hero-grid"></div>
    <div class="scanline"></div>
    <div class="hero-inner">
      <p class="hero-label"><span class="hero-label-line"></span>Boutique officielle</p>
      <h1>STEAL<br>A <span class="outline">BRAIN</span><span class="ac">ROT</span></h1>
      <p class="hero-sub">Les meilleurs templates brainrot pour flex en comments et dominer le game. W only, no cap.</p>
      <div class="hero-cta">
        <a href="#shop-steal" class="btn-fill acid">
          <svg width="14" height="14"><use href="#i-bag"/></svg>
          Voir les templates
        </a>
      </div>
    </div>
  </section>

  <!-- SHOP -->
  <section class="shop" id="shop-steal">
    <div class="shop-row">
      <div class="shop-title">Templates</div>
      <span class="shop-count" id="count-steal"></span>
    </div>
    <div class="grid" id="grid-steal">
      <div class="empty-grid">Chargement...</div>
    </div>
  </section>
</div>

<!-- ══ STORE : TSUNAMI ══ -->
<div class="store" id="store-tsunami">
  <!-- HERO -->
  <section class="hero">
    <div class="hero-grid"></div>
    <div class="scanline blue"></div>
    <div class="hero-inner">
      <p class="hero-label blue"><span class="hero-label-line"></span>Boutique officielle</p>
      <h1>TSUNAMI<br><span class="outline">BRAIN</span><span class="acb">ROT</span></h1>
      <p class="hero-sub">La vague brainrot déferle. Templates exclusifs Tsunami pour submerger les comments.</p>
      <div class="hero-cta">
        <a href="#shop-tsunami" class="btn-fill blue">
          <svg width="14" height="14"><use href="#i-bag"/></svg>
          Voir les templates
        </a>
      </div>
    </div>
  </section>

  <!-- SHOP -->
  <section class="shop" id="shop-tsunami">
    <div class="shop-row">
      <div class="shop-title">Templates</div>
      <span class="shop-count" id="count-tsunami"></span>
    </div>
    <div class="grid" id="grid-tsunami">
      <div class="empty-grid">Chargement...</div>
    </div>
  </section>
</div>

<!-- FOOTER -->
<footer>
  <div class="fl"><svg width="16" height="16" style="color:var(--acid)"><use href="#i-mark"/></svg><span>STEAL</span> A BRAINROT</div>
  <p class="fc">© 2025 — All rights reserved</p>
</footer>

<!-- TOAST -->
<div id="toast"></div>

<!-- CART DRAWER -->
<div class="ov" id="ov" onclick="toggleCart()"></div>
<div class="drawer" id="drawer">
  <div class="dh">
    <span class="dt">Panier</span>
    <button class="dc" onclick="toggleCart()"><svg width="13" height="13"><use href="#i-x"/></svg></button>
  </div>
  <div class="db" id="db"></div>
  <div class="df">
    <div class="tr"><span class="tl">Total</span><span class="tp" id="tp">€0.00</span></div>
    <button class="chk" onclick="chk()"><svg width="14" height="14"><use href="#i-card"/></svg>Checkout</button>
  </div>
</div>

<script>
// ── CURSOR ──────────────────────────────────────────────
const cur = document.getElementById('cur'), ring = document.getElementById('ring');
let mx=0, my=0, rx=0, ry=0;
document.addEventListener('mousemove', e => {
  mx = e.clientX; my = e.clientY;
  cur.style.left = mx+'px'; cur.style.top = my+'px';
});
(function loop() {
  rx += (mx-rx)*.11; ry += (my-ry)*.11;
  ring.style.left = rx+'px'; ring.style.top = ry+'px';
  requestAnimationFrame(loop);
})();

// ── STATE ───────────────────────────────────────────────
const JSON_URL   = 'https://api.jsonbin.io/v3/b/6990e763d0ea881f40bacfd8/latest';
const POLL_MS    = 30000;
let data         = { steal: [], tsunami: [] };
let cart         = JSON.parse(localStorage.getItem('sab3') || '[]');
let activeStore  = 'steal';

// ── SWITCH STORE ────────────────────────────────────────
function switchStore(s) {
  activeStore = s;

  // panels
  document.getElementById('store-steal').classList.toggle('active', s === 'steal');
  document.getElementById('store-tsunami').classList.toggle('active', s === 'tsunami');

  // tabs
  document.getElementById('tab-steal').classList.toggle('active', s === 'steal');
  document.getElementById('tab-tsunami').classList.toggle('active', s === 'tsunami');

  // logo
  const ls = document.getElementById('logo-sq');
  const lt = document.getElementById('logo-text');
  const cb = document.getElementById('cart-btn');
  if (s === 'steal') {
    ls.style.borderColor = 'var(--acid)';
    ls.querySelector('svg').style.color = 'var(--acid)';
    lt.textContent = 'STEAL A BRAINROT';
    cb.className = 'cart-btn';
  } else {
    ls.style.borderColor = 'var(--blue)';
    ls.querySelector('svg').style.color = 'var(--blue)';
    lt.textContent = 'TSUNAMI BRAINROT';
    cb.className = 'cart-btn blue-hover';
  }
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ── FETCH ───────────────────────────────────────────────
async function loadProducts() {
  try {
    const r = await fetch(JSON_URL);
    if (!r.ok) throw 0;
    const json = await r.json();
    const d = json.record;
    const wasEmpty = !data.steal.length && !data.tsunami.length;
    const newItems = (d.steal?.length || 0) + (d.tsunami?.length || 0)
                   > data.steal.length + data.tsunami.length;
    data = d;
    if (!wasEmpty && newItems) toast('Nouveau template disponible');
    renderStore('steal');
    renderStore('tsunami');
  } catch(e) {
    ['steal','tsunami'].forEach(s => {
      document.getElementById('grid-'+s).innerHTML =
        '<div class="empty-grid">Erreur de chargement</div>';
    });
  }
}

// ── RENDER ──────────────────────────────────────────────
function renderStore(s) {
  const items = data[s] || [];
  const grid  = document.getElementById('grid-'+s);
  const count = document.getElementById('count-'+s);
  count.textContent = items.length + ' template' + (items.length !== 1 ? 's' : '');
  if (!items.length) {
    grid.innerHTML = '<div class="empty-grid">Aucun template</div>';
    return;
  }
  const isBlue = s === 'tsunami';
  grid.innerHTML = items.map((p, i) => `
    <div class="card${isBlue ? ' blue-card' : ''}" style="animation-delay:${i*.05}s">
      <div class="card-id">0${i+1}</div>
      <div class="card-name">${p.name}</div>
      <div class="card-desc">${p.description}</div>
      <div class="card-footer">
        <div class="card-price"><sup>€</sup>${p.price.toFixed(2)}</div>
        <button class="buy-btn ${isBlue ? 'blue-hover' : 'acid-hover'}" onclick="addToCart(${p.id},'${s}')">
          <svg width="13" height="13"><use href="#i-plus"/></svg>
          Acheter
        </button>
      </div>
    </div>`).join('');
}

// ── CART ────────────────────────────────────────────────
function addToCart(id, store) {
  const allItems = [...(data.steal||[]), ...(data.tsunami||[])];
  const p = allItems.find(x => x.id === id);
  if (!p) return;
  if (cart.find(x => x.id === id)) { toast('Déjà dans le panier'); return; }
  cart.push({ ...p, _store: store });
  saveCart(); drawCart();
  toast('Ajouté — ' + p.name);
}
function removeItem(id) {
  cart = cart.filter(x => x.id !== id);
  saveCart(); drawCart();
}
function saveCart()  { localStorage.setItem('sab3', JSON.stringify(cart)); }
function drawCart()  {
  document.getElementById('cart-count').textContent = cart.length;
  const b = document.getElementById('db');
  if (!cart.length) {
    b.innerHTML = '<div class="dempty">Panier vide<br>Ajoute des templates</div>';
  } else {
    b.innerHTML = cart.map(p => `
      <div class="ci">
        <div class="ci-info">
          <div class="ci-store ${p._store === 'tsunami' ? 'blue' : 'acid'}">${p._store === 'tsunami' ? 'Tsunami' : 'Steal a Brainrot'}</div>
          <div class="ci-name">${p.name}</div>
          <div class="ci-price">€${p.price.toFixed(2)}</div>
        </div>
        <button class="ci-rm" onclick="removeItem(${p.id})"><svg width="14" height="14"><use href="#i-x"/></svg></button>
      </div>`).join('');
  }
  document.getElementById('tp').textContent = '€' + cart.reduce((s,x)=>s+x.price,0).toFixed(2);
}
function toggleCart() {
  document.getElementById('ov').classList.toggle('open');
  document.getElementById('drawer').classList.toggle('open');
}
function chk() {
  if (!cart.length) { toast('Panier vide'); return; }
  alert('Checkout — Intègre Stripe ici\nTotal: €' + cart.reduce((s,x)=>s+x.price,0).toFixed(2));
}

// ── TOAST ───────────────────────────────────────────────
let tt;
function toast(m) {
  const t = document.getElementById('toast');
  t.textContent = m; t.classList.add('show');
  clearTimeout(tt); tt = setTimeout(() => t.classList.remove('show'), 3000);
}

// ── INIT ────────────────────────────────────────────────
loadProducts();
drawCart();
setInterval(loadProducts, POLL_MS);
</script>
</body>
</html>